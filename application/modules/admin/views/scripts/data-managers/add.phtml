<div class="well">
<form name="addUserForm" id="addUserForm" method="post" action="<?php echo $this->url(array("module"=>"admin", "controller" => "data-managers", "action" => "add"),'default', true) ?>" class="form-horizontal bs-example" role="form" onsubmit="validateNow();return false;">
<fieldset>
                  <legend>Add New PT Participant Login</legend>

        <div class="form-group">
            <label class="col-lg-3 control-label">Login (Primary e-mail) <span class="mandatory">*</span></label>
            <div class="col-lg-5">
                <input type="text" id="userId" name="userId"  size="50" class="isRequired isEmail form-control" title="Please enter the primary email id here" placeholder="Please enter the primary email id here" onblur="checkDuplicate('data_manager','primary_email','userId',null,'This email already exists as a primary email for another user. Please choose another email.')" value="<?php echo (isset($this->contact['email'])) ? $this->contact['email'] : "" ?>"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-lg-3 control-label">Password <span class="mandatory">*</span></label>
            <div class="col-lg-5">
                <input type="password" id="password" name="password" size="50" value="" class="isRequired form-control" title="Please enter a password" placeholder="Please enter a password" onchange="validatePassword(this)"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-lg-3 control-label">Confirm Password <span class="mandatory">*</span></label>
            <div class="col-lg-5">
                <input type="password" id="confirmPassword" name="password"  size="50" value="" class="isRequired form-control confirmPassword" title="Please repeat the same password" placeholder="Please repeat the same password"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-lg-3 control-label">Institute <span class="mandatory">*</span></label>
            <div class="col-lg-5"><input type="text" id="institute" name="institute" size="50" maxlength="255" class="isRequired form-control"  title="Please enter the institute name here" placeholder="Please enter the institute name here"  value="<?php echo (isset($this->contact['lab'])) ? $this->contact['lab'] : "" ?>"/></div>
        </div>
        <div class="form-group">
            <label class="col-lg-3 control-label">User First Name <span class="mandatory">*</span></label>
            <div class="col-lg-5"><input type="text" id="fname" name="fname" size="50" maxlength="255" class="isRequired form-control"  title="Please enter the first name here" placeholder="Please enter the first name here"  value="<?php echo (isset($this->contact['first_name'])) ? $this->contact['first_name'] : "" ?>"/></div>
        </div>
        <div class="form-group">
            <label class="col-lg-3 control-label">User Last Name <span class="mandatory">*</span></label>
            <div class="col-lg-5"><input type="text" id="lname" name="lname" size="50" maxlength="255" class="isRequired form-control" title="Please enter the last name here" placeholder="Please enter the last name here"  value="<?php echo (isset($this->contact['last_name'])) ? $this->contact['last_name'] : "" ?>"/></div>
        </div>
        <div class="form-group">
            <label class="col-lg-3 control-label">Secondary e-mail Address <span class="mandatory">*</span></label>
            <div class="col-lg-5"><input type="text" id="semail" name="semail" size="50" maxlength="255" class="isRequired isEmail form-control" title="Please enter a secondary email id here" placeholder="Please enter a secondary email id here"  /></div>
        </div>
        <div class="form-group">
            <label class="col-lg-3 control-label">Cell Phone Number <span class="mandatory">*</span></label>
            <div class="col-lg-5"><input type="text" id="phone1" name="phone1" size="50" maxlength="255" class="isRequired form-control checkNum"   title="Please enter mobile/cell number here" placeholder="Please enter mobile/cell number here"  value="<?php echo (isset($this->contact['phone'])) ? $this->contact['phone'] : "" ?>"/></div>
        </div>
        <div class="form-group"> 
            <label class="col-lg-3 control-label">Phone Number</label>
            <div class="col-lg-5"><input type="text" id="phone2" name="phone2" size="50" maxlength="255" value="<?php echo $this->rsUser['UserPhoneNumber']; ?>" placeholder="Please enter phone number here" class="checkNum form-control"/></div>
        </div>
		<div class="form-group"> 
            <label class="col-lg-3 control-label">QC Access <span class="mandatory">*</span></label>
            <div class="col-lg-5" style="margin-top:8px;">
				  <input type="radio" class="isRequired"  name="qcAccess" value="yes" title="Please choose QC access"/> Yes
				  <input type="radio" class="isRequired"  name="qcAccess" value="no" checked='checked'/> No
			</div>
        </div>
        <div class="form-group">
                <label class="col-lg-3 control-label">Enable Adding Response Date <span class="mandatory">*</span></label>
                <div class="col-lg-5" style="padding-top:10px;">
                    <input type="radio" id="enableReceiptDateOption" name="receiptDateOption" value="yes"><b> Yes</b>&nbsp;&nbsp;
                    <input type="radio" class="isRequired" id="disableReceiptDateOption" name="receiptDateOption" value="no" checked title="Please choose adding response date enable option"><b> No</b>
                </div>
            </div>
	<div class="form-group">
                <label class="col-lg-3 control-label">Enable Choosing Mode of Receipt <span class="mandatory">*</span></label>
                <div class="col-lg-5" style="padding-top:10px;">
                    <input type="radio" id="enableModeOfReceiptOption" name="modeOfReceiptOption" value="yes"><b> Yes</b>&nbsp;&nbsp;
                    <input type="radio" class="isRequired" id="disableModeOfReceiptOption" name="modeOfReceiptOption" value="no" checked title="Please choose choosing mode of receipt enable option"><b> No</b>
                </div>
            </div>
	
		  <div class="form-group">
                <label class="col-lg-3 control-label">Enable View -Only Access<span class="mandatory">*</span></label>
                <div class="col-lg-5" style="padding-top:10px;">
                    <input type="radio" id="viewOnlyAccess" name="viewOnlyAccess" value="yes"><b> Yes</b>&nbsp;&nbsp;
                    <input type="radio" class="isRequired" name="viewOnlyAccess" value="no" checked='checked' title="Please choose view only access option"><b> No</b>
                </div>
            </div>
        <div class="form-group"> 
            <label class="col-lg-3 control-label">Status <span class="mandatory">*</span></label>
		  <div class="col-lg-5">
				    <select type="text" id="status" name="status" class="isRequired form-control" title="Please select user status here">
					    <option value="active">Active</option>
					    <option value="inactive">Inactive</option>
				    </select>
		  </div>
        </div>

    </table>
    <br>
    <div id="respond" style="margin: 0px auto 0px auto; text-align: center;" align="center">
        <input name="submitbtn" class="btn btn-primary" type="submit" tabindex="7" value="Add"  /> 
        <input class="btn btn-danger" type="button" onclick="window.history.go(-1)" tabindex="8" value="Cancel" /> 
    </div>
</fieldset>
</form>
</div>
<script type="text/javascript">
	var duplicated = false;
    function checkDuplicate(tableName, fieldName, obj, fnct, msg) {
	objValue=document.getElementById(obj).value;
        $.post("<?php echo $this->url(array('module' => 'default', 'controller' => 'common', 'action' => 'check-duplicate')); ?>", { tableName: tableName, fieldName: fieldName, value: objValue, fnct: fnct, format: "html" },
            function (data) {
                if (data > 0) {
                    alert(msg, "err");
                    duplicated = true;
		    $("#"+obj).focus();
                }
                else {
                    duplicated = false;
                }
		return duplicated;
            });
    }
	
    function validateNow(){
		  //checkDduplicateId=checkDuplicate('data_manager','primary_email','userId',null,'This email already exists as a primary email for another user. Please choose another email.')
		  //if (!checkDduplicateId) {
				    flag = deforayValidator.init({
					formId: 'addUserForm'
				    });
				    if(flag && !duplicated){
					$.blockUI();
					document.getElementById('addUserForm').submit();
				    }
		  //}
    }
    function cheackEmailId(){
	primaryEmail=document.getElementById("userId").value;
	secondaryEmail=document.getElementById("semail").value;
	if (secondaryEmail!="") {
	    if (primaryEmail==secondaryEmail) {
	    alert("Please check your primary email and secondary email");
	    document.getElementById("secondaryEmail").value="";
	    $( "#secondaryEmail" ).focus();
	    duplicated = true;
	    }else{
		duplicated = false;
	    }
	}
    }
</script>